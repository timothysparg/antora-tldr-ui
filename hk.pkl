amends "package://github.com/jdx/hk/releases/download/v1.10.6/hk@1.10.6#/Config.pkl"
import "package://github.com/jdx/hk/releases/download/v1.10.6/hk@1.10.6#/Builtins.pkl"

local linters = new Mapping<String, Step> {
   ["actionlint"] = Builtins.actionlint
   ["biome"] = (Builtins.biome) {
      fix = "biome check --write {{ files }}"
      exclude = List(
         "src/js/vendor/**"
      )
   }
   ["stylelint"] = (Builtins.stylelint) {
      check = "npx -y stylelint --cache --cache-location .stylelintcache {{ files }}"
      fix = "npx -y stylelint --cache --cache-location .stylelintcache --fix {{ files }}"
  }
}

hooks {
  ["pre-commit"] {
    fix = true
    stash = "git"
    steps = linters
  }
  ["check"] {
    steps = linters
  }
  ["fix"] {
    fix = true
    steps = linters
  }
}
